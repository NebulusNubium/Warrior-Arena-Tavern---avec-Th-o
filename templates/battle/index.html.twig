{% extends 'base.html.twig' %}

{% block title %}Bataille{% endblock %}

{% block body %}
<h1>Bataille</h1>
<div class="row">
  <div class="col-md-6">
    <h2>Votre équipe</h2>
    <div class="character-list" style="display:flex; flex-wrap:wrap; gap:1em;">
      {% set my = my_team is iterable ? my_team : [] %}
      {% for character in my %}
        <div class="character-item" style="border:1px solid #ccc; padding:1em; border-radius:8px; width:180px; text-align:center;">
          {% if character.imageName %}
            <img src="{{ asset('uploads/images/' ~ character.imageName) }}" alt="{{ character.name }}" style="width:60px; height:60px; object-fit:cover; border-radius:50%;">
          {% else %}
            <div style="width:60px; height:60px; border-radius:50%; background:#eee; display:flex; align-items:center; justify-content:center; color:#aaa; font-size:2em; margin:0 auto;">?</div>
          {% endif %}
          <h3>{{ character.name }}</h3>
          <div>PV: {{ character.HP }}</div>
        </div>
      {% endfor %}
    </div>
  </div>
  <div class="col-md-6">
    <h2>Adversaire : {{ opponent.username }}</h2>
    <div class="character-list" style="display:flex; flex-wrap:wrap; gap:1em;">
      {% set opp = opponent_team is iterable ? opponent_team : [] %}
      {% for character in opp %}
        <div class="character-item" style="border:1px solid #ccc; padding:1em; border-radius:8px; width:180px; text-align:center;">
          {% if character.imageName %}
            <img src="{{ asset('uploads/images/' ~ character.imageName) }}" alt="{{ character.name }}" style="width:60px; height:60px; object-fit:cover; border-radius:50%;">
          {% else %}
            <div style="width:60px; height:60px; border-radius:50%; background:#eee; display:flex; align-items:center; justify-content:center; color:#aaa; font-size:2em; margin:0 auto;">?</div>
          {% endif %}
          <h3>{{ character.name }}</h3>
          <div>PV: {{ character.HP }}</div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<div class="row mt-4">
  <div class="col-md-12">
    <h3>Journal du combat</h3>
    <div style="border:1px solid #ccc; border-radius:8px; background:#fafafa; padding:1em; max-height:300px; overflow:auto;">
      {% if events is defined and events|length %}
        {% for line in events %}
          <div>{{ line }}</div>
        {% endfor %}
      {% else %}
        <div>Aucun événement pour l'instant.</div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
